{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "$id": "https://dataversedevkit.dev/schemas/plugin.manifest.v1.json",
  "title": "Dataverse DevKit Plugin Manifest",
  "description": "Manifest schema for DDK plugins",
  "type": "object",
  "required": ["id", "name", "version", "description"],
  "properties": {
    "id": {
      "type": "string",
      "pattern": "^[a-z0-9]+(\\.[a-z0-9]+)+$",
      "description": "Unique plugin ID in reverse-DNS notation (e.g., com.contoso.ddk.pluginname)"
    },
    "name": {
      "type": "string",
      "minLength": 1,
      "maxLength": 64,
      "description": "Human-readable plugin name"
    },
    "version": {
      "type": "string",
      "pattern": "^\\d+\\.\\d+\\.\\d+(-[a-z0-9.]+)?$",
      "description": "Semantic version (e.g., 1.0.0 or 1.0.0-beta.1)"
    },
    "author": {
      "type": "string",
      "description": "Plugin author name"
    },
    "company": {
      "type": "string",
      "description": "Company or organization name"
    },
    "category": {
      "type": "string",
      "description": "Plugin category (e.g., development, productivity, integration)"
    },
    "description": {
      "type": "string",
      "minLength": 10,
      "maxLength": 500,
      "description": "Brief description of plugin functionality"
    },
    "icon": {
      "type": "string",
      "description": "Path to plugin icon (relative to manifest)"
    },
    "ui": {
      "type": ["object", "null"],
      "description": "UI configuration. Set to null if plugin has no UI.",
      "properties": {
        "entry": {
          "type": ["string", "null"],
          "description": "Relative path to UI entry point from plugin root (e.g., ui/remoteEntry.js). Null if no UI."
        },
        "devEntry": {
          "type": "string",
          "description": "Full URL to UI entry point for development (e.g., http://localhost:5174/dist/assets/remoteEntry.js)"
        },
        "module": {
          "type": "string",
          "description": "Module federation exposed module name (e.g., ./Plugin)"
        },
        "scope": {
          "type": "string",
          "description": "Module federation scope name"
        }
      }
    },
    "backend": {
      "type": ["object", "null"],
      "description": "Backend configuration. Set to null if plugin has no backend.",
      "properties": {
        "assembly": {
          "type": "string",
          "description": "Relative path to plugin backend DLL from plugin root (e.g., backend/MyPlugin.dll)"
        },
        "entryPoint": {
          "type": "string",
          "description": "Fully qualified type name of the plugin class (e.g., MyNamespace.MyPlugin)"
        }
      }
    },
    "permissions": {
      "type": "object",
      "description": "Capabilities required by this plugin",
      "properties": {
        "dataverse": {
          "type": "array",
          "items": {
            "type": "string",
            "enum": ["query", "execute", "metadata", "admin"]
          },
          "uniqueItems": true,
          "description": "Dataverse access levels"
        },
        "filesystem": {
          "type": "array",
          "items": {
            "type": "string",
            "enum": ["temp", "documents", "downloads"]
          },
          "uniqueItems": true,
          "description": "Filesystem access scopes"
        },
        "network": {
          "type": "array",
          "items": {
            "type": "string",
            "format": "uri"
          },
          "description": "Allowed external network endpoints"
        },
        "clipboard": {
          "type": "boolean",
          "default": false,
          "description": "Clipboard read/write access"
        }
      },
      "additionalProperties": false
    },
    "homepage": {
      "type": "string",
      "format": "uri",
      "description": "Plugin homepage or documentation URL"
    },
    "repository": {
      "type": "string",
      "format": "uri",
      "description": "Source code repository URL"
    },
    "license": {
      "type": "string",
      "description": "SPDX license identifier"
    }
  },
  "additionalProperties": false
}
